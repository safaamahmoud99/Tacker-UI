<p-toast></p-toast>
<p-toast position="top-left" key="tl"></p-toast>
<p-toast position="top-right" key="tr"  [baseZIndex]="5000"></p-toast>
<p-toast position="top-center" key="tc"></p-toast>
<p-toast position="bottom-center" key="bc"></p-toast>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<p-toast position="bottom-center" key="c" (onClose)="onReject()" [baseZIndex]="5000">
    <ng-template let-message pTemplate="message">
      <div class="p-flex p-flex-column" style="flex: 1">
        <div class="p-text-center">
          <i class="pi pi-exclamation-triangle" style="font-size: 3rem"></i>
          <h4>{{message.summary}}</h4>
          <p>{{message.detail}}</p>
        </div>
        <div class="p-grid p-fluid">
          <div class="p-col-6">
            <button type="button" pButton (click)="onConfirm()" label="Yes" class="p-button-success"></button>
          </div>
          <div class="p-col-6">
            <button type="button" pButton (click)="onReject()" label="No" class="p-button-secondary"></button>
          </div>
        </div>
      </div>
    </ng-template>
  </p-toast>
<div class="container card">
    <br>
    <div>
        <h1 [translate]="'Tracker.Edit Project Data'" style="margin-bottom: 20px; font-size: 2em;color: #2674a8;"></h1>
    </div>
    <mat-horizontal-stepper [linear]="isLinear" #stepper>
        <mat-step [stepControl]="ProjectdataFormGroup">
            <ng-template matStepLabel>{{'Tracker.Project Data'| translate}}</ng-template>
            <div class="row">
                <div class="p-field col-md-3">
                    <label for="Project Name" class="labelMarginRight" [translate]="'Tracker.Project Name'">
                    </label><br>
                    <input   #ProjectName="ngModel" autofocus
                        [placeholder]="'Tracker.Project Name' | translate"
                        [class.is-invalid]="ProjectName.invalid && ProjectName.touched"
                        [class.is-valid]="ProjectName.valid" type="text" [(ngModel)]="projectObj.projectName" pInputText
                        id="name" required minlength="3" />
                    <br> <small [hidden]="ProjectName.valid || ProjectName.untouched" id="helpId" class="text-danger"
                        [translate]="'Tracker.messege'"></small>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Code" class="labelMarginRight" [translate]="'Tracker.Project Code'"></label><br>
                    <input type="text" #ProCode="ngModel" name="ProjectCode"
                        [placeholder]="'Tracker.Project Code' | translate"
                        [class.is-invalid]="ProCode.invalid && ProCode.touched" [class.is-valid]="ProCode.valid"
                        required minlength="2" [(ngModel)]="projectObj.projectCode" pInputText id="Code" required />
                    <br> <small [hidden]="ProCode.valid || ProCode.untouched" id="helpId" class="text-danger"
                        [translate]="'Tracker.messegecode'"></small>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Type" [translate]="'Tracker.Project Type Name'"></label><br>
                    <p-dropdown [options]="lstProjectTypes" [(ngModel)]="projectObj.projectTypeId"
                        [placeholder]="'Tracker.Project Type Name' | translate" optionLabel="typeName" optionValue="id">
                    </p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Cost" class="labelMarginRight" [translate]="'Tracker.Project Cost'">
                    </label><br>
                    <input type="number" min="1" autofocus [(ngModel)]="projectObj.cost" pInputText id="Cost"
                        #Procost="ngModel" name="ProjectCost" [class.is-invalid]="Procost.invalid && Procost.touched"
                        [placeholder]="'Tracker.Project Cost' | translate" [class.is-valid]="Procost.valid" required
                        minlength="3" />
                    <br> <small [hidden]="Procost.valid || Procost.untouched" id="helpId" class="text-danger"
                        [translate]="'Tracker.messegeNumber'"></small>
                </div>
            </div>
            <br>
            <div class="row">

                <div class="p-field col-md-3">
                    <label for="Plannded Start Date" class="labelMarginRight"
                        [translate]="'Tracker.Plannded Start Date'"></label><br>
                    <mat-form-field class="example-full-width" appearance="fill">
                        <input matInput [matDatepicker]="picker" [min]="minDate"
                            [value]="projectObj.planndedStartDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                            (dateChange)="addEventplanndedStart($event)">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="p-field col-md-3">
                    <label for="Actual Start Date" class="labelMarginRight"
                        [translate]="'Tracker.Actual Start Date'"></label><br>
                    <mat-form-field appearance="fill">
                        <input matInput [matDatepicker]="picker2" class="form-control" [min]="minDate"
                            [value]="projectObj.actualStartDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                            (dateChange)="addEventActualStart($event)">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="p-field col-md-3">
                    <label for="Plannded End Date" class="labelMarginRight"
                        [translate]="'Tracker.Plannded End Date'"></label><br>
                    <mat-form-field appearance="fill">
                        <input matInput [matDatepicker]="picker3" class="form-control" [min]="minplannedStartDate"
                            [value]="projectObj.planndedEndDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                            (dateChange)="addEventplanndedEnd($event)">
                        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                        <mat-datepicker #picker3></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="p-field col-md-3">
                    <label for="Actual End Date" class="labelMarginRight"
                        [translate]="'Tracker.Actual End Date'"></label><br>
                    <mat-form-field appearance="fill">
                        <input matInput [matDatepicker]="picker4" class="form-control" [min]="minActualStartDate"
                            [value]="projectObj.actualEndDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                            (dateChange)="addEventActualEnd($event)">
                        <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                        <mat-datepicker #picker4></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="p-field col-md-3">
                    <label for="Project Period" class="labelMarginRight">
                        {{'Tracker.Project Period' | translate}}{{'Tracker./Days' | translate}}</label><br>
                    <input type="number" #ProPeriod="ngModel" name="ProPeriod" autofocus
                        [placeholder]="'Tracker.Project Period' | translate" min="1"
                        [class.is-invalid]="ProPeriod.invalid && ProPeriod.touched" [class.is-valid]="ProPeriod.valid"
                        required minlength="3" [(ngModel)]="projectObj.projectPeriod" pInputText id="Period" required />
                    <br> <small [hidden]="ProPeriod.valid || ProPeriod.untouched" id="helpId" class="text-danger"
                        [translate]="'Tracker.messegeNumber'"></small>
                </div>
                <div class="p-field col-md-3">
                    <label for="organization Name" class="labelMarginRight"
                        [translate]="'Tracker.Organization Name'"></label><br>
                    <p-dropdown [options]="lstOrganizations" [(ngModel)]="projectObj.organizationId"
                        [placeholder]="'Tracker.Organization Name' | translate" optionLabel="organizationName"
                        optionValue="id">
                    </p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Manager" class="labelMarginRight" [translate]="'Tracker.Project Manager'">
                    </label><br>
                    <p-dropdown [options]="allEmps" [(ngModel)]="projectObj.employeeId"
                        [placeholder]="'Tracker.Project Manager' | translate" optionLabel="employeeName"
                        optionValue="id">
                    </p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="site Name" class="labelMarginRight" [translate]="'Tracker.Site Name'"></label><br>
                    <p-multiSelect [options]="lstAllSites" name="inputAllSites" [style]="{'width':'100%'}"
                        (onChange)="getSiteIdEvent($event)" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="selectedSitesColumns" optionLabel="sitename"
                        [placeholder]="'Tracker.Site Name'| translate">
                        <ng-template let-selectedSitesColumns pTemplate="selectedItems">
                            <ng-container *ngFor="let selectedLayer of selectedSitesColumns">
                                {{selectedLayer.sitename}} ,
                            </ng-container>
                        </ng-template>
                    </p-multiSelect>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="p-field col-md-6">
                    <label for="description" [translate]="'Tracker.Description'"></label><br>
                    <textarea id="description" [(ngModel)]="projectObj.description" pInputTextarea required rows="3"
                        cols="63"></textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-6"></div>
                <div class="col-md-2">
                    <button mat-stroked-button [disabled]="IsSaveProject" (click)="edit()" color="primary"
                        mat-button>{{'Tracker.Submit'|translate}}</button>
                    <!-- <button mat-stroked-button [disabled]="disabledButton==false" color="primary" mat-button matStepperNext>{{'Tracker.NEXT'|translate}}</button> -->
                </div>
                <div class="col-md-2">
                    <!-- <button mat-stroked-button [disabled]="IsSaveProject" (click)="AddProject()" color="primary" mat-button >{{'Tracker.Submit'|translate}}</button> -->
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
        <mat-step [stepControl]="AssetFormGroup">
            <ng-template matStepLabel>{{'Tracker.Assets'| translate}}</ng-template>
            <div class="row">
                <div class="p-field col-md-3" >
                    
                   
                        <label for="sitename" [translate]="'Tracker.Sites'"></label><br>                  
                    <p-listbox [listStyle]="{'max-height':'300px'}" [scrollable]="true" [options]="selectedSitesColumns" [(ngModel)]="projectSiteClientObj.siteId"
                        optionValue="id" (onChange)="getProjectSiteIdEvent($event)" optionLabel="sitename"></p-listbox>
                    <br>
        
                    <label for="Client Name" [translate]="'Tracker.Client Name'"></label><br>
                    <p-multiSelect (onChange)="getNotificattionEditClient($event)" appendTo="body"
                        [options]="lstClients" name="inputAllclients" [style]="{'width':'100%'}"
                        [ngModelOptions]="{standalone: true}" [(ngModel)]="lstSelectedClients" optionLabel="clientName"
                        [placeholder]="'Tracker.Client Name'| translate">
                        <ng-template let-lstSelectedClients pTemplate="selectedItems">
                            <ng-container *ngFor="let selectedLayer of lstSelectedClients">
                                {{selectedLayer.clientName}} ,
                            </ng-container>
                        </ng-template>
                    </p-multiSelect>
                    <br><br>
                    <button type="submit" class="mb-2" color="primary" *ngIf="isshowBtn==true" (click)="UpdateClient()"
                    mat-flat-button>{{'Tracker.Update Client'|translate}}</button>
                </div>
                <div class="p-field col-md-9 card">
                    <div class="row">
                        <div class="p-field col-md-4 mt-3">
                            <button pButton [label]="'Tracker.Clear' | translate" class="p-button-outlined"
                                icon="pi pi-filter-slash" (click)="cleartable(dt1)">
                            </button>
                        </div>
                        <div class="p-field col-md-2">
                        </div>
                        <div class="p-field col-md-3"></div>
                        <div class="p-field col-md-3">
                            <button type="submit" (click)="AddAssets()" style="float: right;margin-top: 20px;"
                                class="btn btn-primary">{{'Tracker.Add Asset' | translate}}</button>
                        </div>
                    </div>
                    <div class="row mt-3">

                        <div class="col-md-12">
                            <p-table [value]="listProjectSiteAssetClients" [scrollable]="true" scrollHeight="400px"
                                scrollDirection="both" #dt1>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <!-- <th>Site Name</th> -->
                                        <th>{{'Tracker.Asset Name' | translate}}
                                            <p-columnFilter type="text" field="assetName" display="menu">
                                            </p-columnFilter>
                                        </th>
                                        <th>{{'Tracker.Asset Serial' | translate}}
                                            <p-columnFilter type="text" field="serialNumber" display="menu">
                                            </p-columnFilter>
                                        </th>
                                        <!-- <th>{{'Tracker.DueDate' | translate}}
                                            <p-columnFilter type="text" field="days" display="menu"></p-columnFilter>
                                        </th> -->
                                        <th>{{'Tracker.Warranty Period' | translate}}
                                            <p-columnFilter type="text" field="warrantyPeriod" display="menu">
                                            </p-columnFilter>
                                        </th>
                                        <th>{{'Tracker.Warranty Start Date' | translate}}
                                            <p-columnFilter type="date" field="warrantyStartDate" display="menu">
                                            </p-columnFilter>
                                        </th>
                                        <th>{{'Tracker.Supplier Name' | translate}}
                                            <p-columnFilter type="text" field="supplierName" display="menu">
                                            </p-columnFilter>
                                        </th>
                                        <!-- <th>{{'Tracker.Client' | translate}}
                                            <p-columnFilter type="text" field="clientName" display="menu">
                                            </p-columnFilter>

                                        </th> -->
                                        <th>{{'Tracker.Controls' | translate}}</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-asset>
                                    <tr>
                                        <!-- <td>{{i.siteName}}</td> -->
                                        <td>{{asset.assetName}}</td>
                                        <td>{{asset.serialNumber}}</td>
                                        <!-- <td>{{asset.days}} Days</td> -->
                                        <td>{{asset.warrantyPeriod}}Days</td>
                                        <td>{{asset.warrantyStartDate | date:'dd/MM/yyyy'}}</td>
                                        <td>{{asset.supplierName}}</td>
                                        <!-- <td>
                                            <div *ngFor="let cln of asset.clients">
                                                <div>{{cln.clientName}}</div>
                                            </div>
                                        </td> -->
                                        <td style="text-align: inherit;">
                                            <span class="p-button-icon pi pi-pencil" aria-hidden="true"
                                                style="margin-left: 15px;cursor: pointer;" pTooltip="Edit asset" (click)="editAsset(asset.id)"></span>
                                            <span class="p-button-icon pi pi-times" (click)="confirm(asset.id)"
                                                aria-hidden="true" pTooltip="Delete asset"
                                                style="margin-left: 15px;cursor: pointer;"></span>
                                        </td>
                                    </tr>
                                    <tr *ngIf="listProjectSiteAssetClients.length == 0">
                                        <td colspan="4" style="color: rgb(102, 97, 23);"
                                            [translate]="'Tracker.No data found'">.
                                        </td>
                                    </tr>

                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-3">
                    <!-- <button type="submit" class="mb-2" color="primary" *ngIf="isshowBtn==true" (click)="UpdateClient()"
                        mat-flat-button>{{'Tracker.Update Client'|translate}}</button> -->
                    <button mat-stroked-button color="primary" mat-button matStepperPrevious>
                        {{'Tracker.Back'|translate}}</button>
                </div>
                <div class="col-md-7"></div>
                <div class="col-md-2">
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
        <mat-step [stepControl]="PartenerFormGroup">
            <ng-template matStepLabel>{{'Tracker.Parteners'| translate}}</ng-template>
            <div class="container">
                <div class="row">
                    <div class="col-md-10"></div>
                    <div class="col-md-2 mb-2">
                        <button (click)="showBasicDialog()" mat-flat-button color="primary">{{'Tracker.Add Partener' |
                            translate}}</button>
                    </div>
                </div>
                <div class="row card mb-2">
                    <p-table [value]="projectObj.listOfStackholders">
                        <ng-template pTemplate="header">
                            <tr>
                                <!-- style="color: #2674a8; font-size: 20px; font: bold;" -->
                                <th>{{'Tracker.Partener Name'| translate}}</th>
                                <th>{{'Tracker.Mobile' | translate}}</th>
                                <th>{{'Tracker.Rank' | translate}}</th>
                                <th>{{'Tracker.Controls'| translate}}</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-i>
                            <tr>
                                <td>{{i.stackeholderName}}</td>
                                <td>{{i.mobile}}</td>
                                <td>{{i.rank}}</td>
                                <!-- <td style="text-align: inherit;">
                                    <span class="p-button-icon pi pi-pencil" aria-hidden="true"
                                        style="margin-left: 15px;cursor: pointer;" pTooltip="Edit asset" (click)="editAsset(asset.id)"></span>
                                    <span class="p-button-icon pi pi-times" (click)="confirm(asset.id)"
                                        aria-hidden="true" pTooltip="Delete asset"
                                        style="margin-left: 15px;cursor: pointer;"></span>
                                </td> -->
                                <td>
                                    <!-- <button pButton icon="pi pi-trash" class="p-button-danger"
                                    (click)="delStakeHolders(i.id)"></button> -->

                                    <span class="p-button-icon pi pi-pencil" aria-hidden="true"
                                    style="margin-left: 15px;cursor: pointer;" pTooltip="Edit Partener" (click)="editStak(i.id)"></span>
                                    <span class="p-button-icon pi pi-trash" (click)="ConfirmDelStack(i.id)"
                                        aria-hidden="true" pTooltip="Delete Partener "
                                        style="margin-left: 15px;color:red"></span>
                                </td>

                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-3">
                    <button mat-stroked-button color="primary" mat-button matStepperPrevious>
                        {{'Tracker.Back'|translate}}</button>
                </div>
                <div class="col-md-7"></div>
                <div class="col-md-2">
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
        <mat-step [stepControl]="MileStoneFormGroup">
            <ng-template matStepLabel>{{'Tracker.MileStones'| translate}}</ng-template>
            <div class="container">
                <div class="row">
                    <div class="col-md-10"></div>
                    <div class="col-md-2 mb-2">
                        <button (click)="showmileDialog()" mat-flat-button color="primary">{{'Tracker.Add MileStones' |
                            translate}}</button>
                    </div>
                </div>
                <div class="row card mb-2">
                    <p-table [value]=" projectObj.listOfmilestones">
                        <ng-template pTemplate="header">
                            <tr>
                                <th [translate]="'Tracker.Title'"></th>
                                <th [translate]="'Tracker.Start Date'"></th>
                                <th [translate]="'Tracker.End Date'"></th>
                                <th>{{'Tracker.Controls'| translate}}</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-i>
                            <tr>
                                <td>
                                    {{i.title}}
                                </td>
                                <td>
                                    {{i.startDate | date:'dd/MM/yyyy'}}
                                </td>
                                <td>
                                    {{i.endDate | date:'dd/MM/yyyy'}}
                                </td>
                                <td>
                                    <span class="p-button-icon pi pi-pencil" aria-hidden="true"
                                    style="margin-left: 15px;cursor: pointer;" pTooltip="Edit mileston" (click)="editMile(i.id)"></span> &nbsp;
                                    <span class="p-button-icon pi pi-trash" (click)="delMile(i.id)" aria-hidden="true"
                                        pTooltip="Delete mileston " style="margin-left: 15px;color:red"></span>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-3">
                    <button mat-stroked-button color="primary" mat-button matStepperPrevious>
                        {{'Tracker.Back'|translate}}</button>
                </div>
                <div class="col-md-7"></div>
                <div class="col-md-2">
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
        <mat-step [stepControl]="TeamFormGroup">
            <ng-template matStepLabel>{{'Tracker.Teams'| translate}}</ng-template>
            <div class="container">
                <div class="row">
                    <div class="col-md-10"></div>
                    <div class="col-md-2  mb-2">
                        <button (click)="showteamDialog()" mat-flat-button color="primary">{{'Tracker.Add Teams' |
                            translate}}</button>
                    </div>
                </div>
                <div class="row card mb-2">
                    <p-table [value]=" projectObj.listofprojectteam">
                        <ng-template pTemplate="header">
                            <tr>
                                <th [translate]="'Tracker.Team Name'"></th>
                                <th [translate]="'Tracker.Position Name'"></th>
                                <th [translate]="'Tracker.Employee Name'"></th>
                                <th [translate]="'Tracker.Department Name'"></th>
                                <th>{{'Tracker.Delete'| translate}}</th>

                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-i>
                            <tr>
                               <td>{{i.teamName}}</td>
                                <td>
                                    {{i.projectPositionName}}
                                </td>
                                <td>
                                    {{i.employeeName}}
                                </td>
                                <td>
                                    {{i.departmentName}}
                                </td>
                                <td>
                                    <span class="p-button-icon pi pi-trash" (click)="delteam(i.id)" aria-hidden="true"
                                        pTooltip="Delete Team" style="margin-left: 15px;color:red"></span>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-3">
                    <button mat-stroked-button color="primary" mat-button matStepperPrevious>
                        {{'Tracker.Back'|translate}}</button>
                </div>
                <div class="col-md-7"></div>
                <div class="col-md-2">
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
        <mat-step [stepControl]="DocumentsFormGroup">
            <ng-template matStepLabel>{{'Tracker.Documents'| translate}}</ng-template>
            <div class="container">
                <div class="row">
                    <div class="col-md-10"></div>
                    <div class="col-md-2  mb-2">
                        <button (click)="showdocDialog()" mat-flat-button color="primary">{{'Tracker.Add Document' |
                            translate}}</button>
                    </div>
                </div>
                <div class="row card mb-2">
                    <p-table [value]=" projectObj.listOfdocuments">
                        <ng-template pTemplate="header">
                            <tr>
                                <th [translate]="'Tracker.Document Name'">
                                </th>
                                <th [translate]="'Tracker.Document File'">
                                </th>
                                <th>{{'Tracker.Delete'| translate}}</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-i>
                            <tr>
                                <td>{{i.documentName}}</td>
                                <td (click)="downloadFile(i.documentFile)"
                                    style="color: blue; cursor: pointer; text-decoration: blue  underline;">
                                    {{i.documentFile}}
                                </td>
                                <td>
                                    <span class="p-button-icon pi pi-trash" (click)="delDocument(i.id)"
                                        aria-hidden="true" pTooltip="Delete Document "
                                        style="margin-left: 15px;color:red"></span>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>

            </div>
            <br>
            <div class="row">
                <div class="col-md-3">
                    <button mat-stroked-button color="primary" mat-button matStepperPrevious>
                        {{'Tracker.Back'|translate}}</button>
                </div>
                <div class="col-md-7"></div>
                <div class="col-md-2">
                    <button mat-stroked-button color="primary" mat-button
                        matStepperNext>{{'Tracker.NEXT'|translate}}</button>
                </div>
            </div>
        </mat-step>
    </mat-horizontal-stepper>

<!-- Edit Partner Dialog-->
<p-dialog [header]="'Tracker.Edit Partener' | translate" [(visible)]="dispalyStackholderEdit" [style]="{width: '50vw'}"
[baseZIndex]="10000">
<div class="row">
    <div class="col">
      <div class="p-col-12 p-md-4">
        
            <label for="Partener Name"   [translate]="'Tracker.Partener Name'"></label>
            <div class="p-inputgroup"> 
            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
            <input #PartnerrName="ngModel" class="form-control"
                [class.is-invalid]="PartnerrName.invalid && PartnerrName.touched"
                [class.is-valid]="PartnerrName.valid" required minlength="3" type="text" pInputText
                [placeholder]="'Tracker.Partener Name' | translate"
                [(ngModel)]="stackObj.stackeholderName">
        </div>
        <small [hidden]="PartnerrName.valid || PartnerrName.untouched" id="helpId" class="text-danger"
            [translate]="'Tracker.messege'"></small>
    </div>
        <div class="p-col-12 p-md-4">
        
            <label for="Mobile" [translate]="'Tracker.Mobile'"></label> 
              <div class="p-inputgroup">
              <span class="p-inputgroup-addon"></span>
              <input #Partenerrmobile="ngModel" class="form-control"
                  [class.is-invalid]="Partenerrmobile.invalid && Partenerrmobile.touched"
                  [class.is-valid]="Partenerrmobile.valid" required  pattern="^01[0-2,5]{1}[0-9]{8}$" type="text" pInputText
                  [placeholder]="'Tracker.Mobile' | translate" [(ngModel)]="stackObj.mobile">
              <span class="p-inputgroup-addon"></span>
          </div>
          <small [hidden]="Partenerrmobile.valid || Partenerrmobile.untouched" id="helpId" class="text-danger validation"
        [translate]="'Tracker.phoneNumber'">  </small>
      </div>
      <div class="p-col-12 p-md-4">
        
            <label for="Rank" [translate]="'Tracker.Rank'"></label>
            <div class="p-inputgroup"> 
            <span class="p-inputgroup-addon"></span>
            <input #Partenerrrank="ngModel" class="form-control"
                [class.is-invalid]="Partenerrrank.invalid && Partenerrrank.touched"
                [class.is-valid]="Partenerrrank.valid" required minlength="3" type="text" pInputText
                [placeholder]="'Tracker.Rank' | translate" [(ngModel)]="stackObj.rank">
            <span class="p-inputgroup-addon"></span>
        </div>
        <small [hidden]="Partenerrrank.valid || Partenerrrank.untouched" id="helpId" class="text-danger"
            [translate]="'Tracker.messege'"></small>
    </div>
        <div class="p-col-12 p-md-4">
            <div>
                <textarea pInputTextarea [placeholder]="'Tracker.Description' | translate" style="width: 100%;"
                    [(ngModel)]="stackObj.description" class="row p-col-12 p-md-4"></textarea>
            </div>
            <div>
                <button class="btn btn-info" style="margin-top: 20px;float: right;"
                    (click)="UpdateStackholder()" [translate]="'Tracker.Update'" ></button>
            </div>
        </div>
    </div>  
</div>
<ng-template pTemplate="footer">
    <p-button icon="pi pi-check" (click)="dispalyStackholderEdit=false" [label]="'Tracker.Ok' | translate"
        styleClass="p-button-text">
    </p-button>
</ng-template>
</p-dialog>
    <!-- Dialog Add Partener -->
    <p-dialog [header]="'Tracker.Add Partener' | translate" [(visible)]="displayBasic" [style]="{width: '50vw'}"
        [baseZIndex]="10000">
        <div class="row">
            <div class="col">
              <div class="p-col-12 p-md-4">
                
                    <label for="Partener Name"   [translate]="'Tracker.Partener Name'"></label>
                    <div class="p-inputgroup"> 
                    <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                    <input #PartnerName="ngModel" class="form-control"
                        [class.is-invalid]="PartnerName.invalid && PartnerName.touched"
                        [class.is-valid]="PartnerName.valid" required minlength="3" type="text" pInputText
                        [placeholder]="'Tracker.Partener Name' | translate"
                        [(ngModel)]="stackholderInLst.stackeholderName">
                </div>
                <small [hidden]="PartnerName.valid || PartnerName.untouched" id="helpId" class="text-danger"
                    [translate]="'Tracker.messege'"></small>
            </div>
                <div class="p-col-12 p-md-4">
                
                    <label for="Mobile" [translate]="'Tracker.Mobile'"></label> 
                      <div class="p-inputgroup">
                      <span class="p-inputgroup-addon"></span>
                      <input #Partenermobile="ngModel" class="form-control"
                          [class.is-invalid]="Partenermobile.invalid && Partenermobile.touched"
                          [class.is-valid]="Partenermobile.valid" required  pattern="^01[0-2,5]{1}[0-9]{8}$" type="text" pInputText
                          [placeholder]="'Tracker.Mobile' | translate" [(ngModel)]="stackholderInLst.mobile">
                      <span class="p-inputgroup-addon"></span>
                  </div>
                  <small [hidden]="Partenermobile.valid || Partenermobile.untouched" id="helpId" class="text-danger validation"
                [translate]="'Tracker.phoneNumber'">  </small>
              </div>
              <div class="p-col-12 p-md-4">
                
                    <label for="Rank" [translate]="'Tracker.Rank'"></label>
                    <div class="p-inputgroup"> 
                    <span class="p-inputgroup-addon"></span>
                    <input #Partenerrank="ngModel" class="form-control"
                        [class.is-invalid]="Partenerrank.invalid && Partenerrank.touched"
                        [class.is-valid]="Partenerrank.valid" required minlength="3" type="text" pInputText
                        [placeholder]="'Tracker.Rank' | translate" [(ngModel)]="stackholderInLst.rank">
                    <span class="p-inputgroup-addon"></span>
                </div>
                <small [hidden]="Partenerrank.valid || Partenerrank.untouched" id="helpId" class="text-danger"
                    [translate]="'Tracker.messege'"></small>
            </div>
                <div class="p-col-12 p-md-4">
                    <div>
                        <textarea pInputTextarea [placeholder]="'Tracker.Description' | translate" style="width: 100%;"
                            [(ngModel)]="stackholderInLst.description" class="row p-col-12 p-md-4"></textarea>
                    </div>
                    <div>
                        <button class="btn btn-info" style="margin-top: 20px;float: right;"
                            (click)="Savetolist_Stackholders()" [translate]="'Tracker.Save To List'"></button>
                    </div>
                </div>
            </div>

            <div class="col">
                <table class="table">
                    <thead>
                        <tr>
                            <th [translate]="'Tracker.Partener Name'"></th>
                            <th [translate]="'Tracker.Mobile'"></th>
                            <!-- <th>Projectcost</th> -->
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let i of lstOfStackholder">
                            <td>
                                {{i.stackeholderName}}
                            </td>
                            <td>
                                {{i.mobile}}
                            </td>
                        </tr>
                        <tr>

                        </tr>
                        <tr *ngIf="lstOfStackholder.length == 0">
                            <td colspan="4" style="color: rgb(102, 97, 23);" [translate]="'Tracker.No data found'"></td>
                        </tr>
                    </tbody>

                </table>

                <button class="btn btn-warning" [disabled]="lstOfStackholder.length == 0"
                    (click)="SaveToDB_Stackholders()" [translate]="'Tracker.Add'"></button>
            </div>
        </div>


        <ng-template pTemplate="footer">
            <p-button icon="pi pi-check" (click)="displayBasic=false" [label]="'Tracker.Ok' | translate"
                styleClass="p-button-text">
            </p-button>
        </ng-template>
    </p-dialog>
    <!--Edit Mile Stone Dialog -->
    <p-dialog [header]="'Tracker.Edit MileStone'| translate" [(visible)]="dispalyMileEdit" [style]="{width: '50vw'}"
    [baseZIndex]="10000">
    <div class="row">
        <div class="col">
            <div class="p-col-6 p-md-4">
                <label for="Title" [translate]="'Tracker.Title'"></label>
                <div class="p-inputgroup">
                    <span class="p-inputgroup-addon"></span>
                    <input type="text" pInputText placeholder="Title" [(ngModel)]="MileObj.title">
                </div>
            </div>
            <div class="row p-col-4 p-md-4">
                <div class="p-field col-md-6">
                    <label for="StartDate" class="labelMarginRight" [translate]="'Tracker.Start Date'">
                    </label>
                    <!-- <p-calendar [(ngModel)]="MileObj.startDate" dateFormat="dd/mm/yy" appendTo="body">
                    </p-calendar> -->
                    <mat-form-field class="example-full-width" appearance="fill">
                        <input matInput [matDatepicker]="pickerstartdate"
                            [value]="MileObj.startDate | date:'yyyy-MM-dd'" [placeholder]="'Tracker.Start Date' | translate"
                            (dateChange)="addEventstartdateMile($event)"  >
                        <mat-datepicker-toggle matSuffix [for]="pickerstartdate"></mat-datepicker-toggle>
                        <mat-datepicker #pickerstartdate></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="p-field col-md-6">
                    <label for="End Date" class="labelMarginRight" [translate]="'Tracker.End Date'">
                    </label>
                    <!-- <p-calendar [(ngModel)]="MileObj.endDate" dateFormat="dd/mm/yy" appendTo="body">
                    </p-calendar> -->
                <mat-form-field class="example-full-width" appearance="fill">
                    <input matInput [matDatepicker]="pickerenddate"
                        [value]="MileObj.endDate | date:'yyyy-MM-dd'"[placeholder]="'Tracker.End Date' | translate"
                        (dateChange)="addEventenddateMile($event)">
                <mat-datepicker-toggle matSuffix [for]="pickerenddate"></mat-datepicker-toggle>
                    <mat-datepicker #pickerenddate></mat-datepicker>
                </mat-form-field>
                </div>
            </div>

            <div class="p-col-6 p-md-4">
                <div>
                    <textarea pInputTextarea [placeholder]="'Tracker.Description' | translate"
                        [(ngModel)]="MileObj.description" style="width: 100%;"
                        class="row p-col-12 p-md-4"></textarea>
                </div>
                <div>
                    <button class="btn btn-info" style="margin-top: 20px;float: right;"
                        (click)="UpdateMileStone()" [translate]="'Tracker.Update'"></button>
                </div>
            </div>
        </div>
      
    </div>
    <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" (click)="dispalyMileEdit=false" [label]="'Tracker.Ok'|translate"
            styleClass="p-button-text">
        </p-button>
    </ng-template>
    </p-dialog> 
    <!-- Dialog Mile Stone -->
    <p-dialog [header]="'Tracker.Add MileStones'| translate" [(visible)]="displayMile" [style]="{width: '60vw'}"
        [baseZIndex]="10000">
        <div class="row">
            <div class="col">
                <div class="p-col-12 p-md-4">
                    <label for="Title" [translate]="'Tracker.Title'"></label>
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon"></span>
                        <input type="text" pInputText placeholder="Title" [(ngModel)]="milestonInLst.title">
                    </div>
                </div>
                <div class="row p-col-12 p-md-4">
                    <div class="p-field col-md-6">
                        <label for="StartDate" class="labelMarginRight" [translate]="'Tracker.Start Date'">
                        </label><br>
                        <p-calendar [(ngModel)]="milestonInLst.startDate" dateFormat="dd/mm/yy" appendTo="body">
                        </p-calendar>
                    </div>
                    <div class="p-field col-md-6">
                        <label for="End Date" class="labelMarginRight" [translate]="'Tracker.End Date'">
                        </label><br>
                        <p-calendar [(ngModel)]="milestonInLst.endDate" dateFormat="dd/mm/yy" appendTo="body">
                        </p-calendar>                    
                    </div>
                </div>

                <div class="p-col-12 p-md-4">
                    <div>
                        <textarea pInputTextarea [placeholder]="'Tracker.Description' | translate"
                            [(ngModel)]="milestonInLst.description" style="width: 100%;"
                            class="row p-col-12 p-md-4"></textarea>
                    </div>
                    <div>
                        <button class="btn btn-info" style="margin-top: 20px;float: right;"
                            (click)="Savetolist_Milestones()" [translate]="'Tracker.Save To List'"></button>
                    </div>
                </div>
            </div>

            <div class="col">
                <table class="table">
                    <thead>
                        <tr>
                            <th [translate]="'Tracker.Title'"></th>
                            <th [translate]="'Tracker.Start Date'"></th>
                            <th [translate]="'Tracker.End Date'"></th>
                            <th [translate]="'Tracker.Description'"></th>
                            <!-- <th>Projectcost</th> -->
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let i of lstOfMilestones">
                            <td>
                                {{i.title}}
                            </td>
                            <td>
                                {{i.startDate | date:'dd/MM/yyyy'}}
                            </td>
                            <td>
                                {{i.endDate | date:'dd/MM/yyyy'}}
                            </td>
                            <td>
                                {{i.description}}
                            </td>
                        </tr>
                        <tr>

                        </tr>
                        <tr *ngIf="lstOfMilestones.length == 0">
                            <td colspan="4" style="color: rgb(102, 97, 23);" [translate]="'Tracker.No data found'"></td>
                        </tr>
                    </tbody>

                </table>

                <button class="btn btn-warning" [disabled]="lstOfMilestones.length == 0" (click)="SaveToDB_Milestones()"
                    [translate]="'Tracker.Add'"></button>
            </div>
        </div>
        <ng-template pTemplate="footer">
            <p-button icon="pi pi-check" (click)="displayMile=false" [label]="'Tracker.Ok'|translate"
                styleClass="p-button-text">
            </p-button>
        </ng-template>
    </p-dialog>
    <!-- Dialog Team-->
    <p-dialog header="Add New Team" [(visible)]="displayteam" [style]="{width: '50vw'}" [baseZIndex]="10000">
        <div class="row">
            <div class="p-col-12 p-md-4">
                <div class="p-inputgroup">
                    <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                    <input type="text" pInputText [placeholder]="'Tracker.Team Name' | translate"
                        [(ngModel)]="team.Name">
                </div>
            </div>
            <div class="col">
                <div class="col">
                    <label class="labelstyle" [translate]="'Tracker.Position Name'"></label>
                    <select [(ngModel)]="ProjectTeam.projectPositionId" name="id" class="form-control" 
                    (change)="OnChangePosID($event)">emp
                        <option hidden [value]="" selected>select Position Name </option>
                        <option *ngFor="let the of lstOfprojectPosition" value="{{the.id}}">
                            {{the.positionName}}
                        </option>
                    </select>
                </div>
                <div class="col">
                    <label class="labelstyle" [translate]="'Tracker.Employee Name'"></label>
                    <select [(ngModel)]="ProjectTeam.employeeId" name="sel2" class="form-control"
                        (change)="OnChangeEmpID($event)">
                        <option hidden [value]="" selected>select Employee </option>
                        <option *ngFor="let th of emps" value="{{th.id}}">{{th.employeeName}}
                        </option>
                    </select>
                </div>
                <div class="col">
                    <label class="labelstyle" [translate]="'Tracker.Department Name'"></label>
                    <select [(ngModel)]="ProjectTeam.departmentId" name="sub" class="form-control">
                        <option hidden [value]="" selected>select Department</option>
                        <option value="{{department.id}}">{{department.name}}</option>
                    </select>
                </div>
                <div class="p-col-12 p-md-4">
                    <div>
                        <button class="btn btn-info" style="margin-top: 20px;float: right;" (click)="Savetolist_Teams()"
                            [translate]="'Tracker.Save To List'">
                        </button>
                    </div>
                </div>
            </div>
            <div class="col">
                <table class="table">
                    <thead>
                        <tr>{{ 'Tracker.Team Name' | translate }} : {{teamname}}</tr>
                        <tr>
                             
                            <th [translate]="'Tracker.Position Name'"></th>
                            <th [translate]="'Tracker.Employee Name'"></th>
                            <th [translate]="'Tracker.Department Name'"></th>
                            <!-- <th>Projectcost</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let i of lstOfProjectTeams">
                           
                            <td>
                                {{i.projectPositionName}}
                            </td>
                            <td>
                                {{i.employeeName}}
                            </td>
                            <td>
                                {{i.departmentName}}
                            </td>
                           
                        </tr>
                        <tr *ngIf="lstOfProjectTeams.length == 0">
                            <td colspan="4" style="color: rgb(102, 97, 23);" [translate]="'Tracker.No data found'"></td>
                        </tr>
                    </tbody>
                </table>
                <button class="btn btn-warning" [disabled]="lstOfProjectTeams.length == 0"
                    (click)="SaveToDB_ProjectTeams()" [translate]="'Tracker.Add'"></button>
            </div>
        </div>
        <ng-template pTemplate="footer">
            <p-button icon="pi pi-check" (click)="displayteam=false" [label]="'Tracker.Ok'|translate"
                styleClass="p-button-text">
            </p-button>
        </ng-template>
    </p-dialog>
    <!-- Dialog Documents-->
    <p-dialog header="Add Document" [(visible)]="displaydoc" [style]="{width: '50vw'}" [baseZIndex]="10000">
        <div class="row">
            <div class="col">
                <div class="p-col-12 p-md-4">
                    <label for="Document Name" [translate]="'Tracker.Document Name'" ></label>
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                        <input type="text" pInputText [placeholder]="'Tracker.Document Name' | translate"
                            [(ngModel)]="docproject.documentName">
                    </div>
                </div>


                <div class="p-col-12 p-md-4">
                    <div>
                        <textarea pInputTextarea [placeholder]="'Tracker.Description' | translate" style="width: 100%;"
                            [(ngModel)]="docproject.Description" class="row p-col-12 p-md-4"></textarea>
                    </div>
                    <br />
                    <br />
                    <div class="p-field col-md-3" style="margin-bottom:15px;">
                        <div class="col-md-3">
                            <input type="file" #file [placeholder]="'Tracker.Choose file'|translate"
                                (change)="uploadFile(file.files)" style="display:none;">
                            <button type="button" class="btn btn-success" (click)="file.click()"
                                [translate]="'Tracker.Upload'"></button>
                        </div>
                        <div class="col-md-4">

                            <span class="upload" *ngIf="message">

                                {{message}}
                            </span>
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-info" style="margin-top: 20px;float: right;" (click)="Savedoctolist()"
                            [translate]="'Tracker.Save To List'"></button>
                    </div>
                </div>
            </div>

            <div class="col">
                <table class="table">
                    <thead>
                        <tr>
                            <th [translate]="'Tracker.Document Name'"></th>
                            <th [translate]="'Tracker.Description'"></th>
                            <th [translate]="'Tracker.File Name'"></th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let i of lstoddocproj">

                            <td>{{i.documentName}}</td>
                            <td>{{i.Description}}</td>
                            <td>{{i.documentFile}}</td>
                        </tr>
                        <tr>

                        </tr>
                        <tr *ngIf="lstoddocproj.length == 0">
                            <td colspan="4" style="color: rgb(102, 97, 23);" [translate]="'Tracker.No data found'"></td>
                        </tr>
                    </tbody>

                </table>

                <button class="btn btn-warning" [disabled]="lstoddocproj.length == 0" (click)="SaveDocuentToDB()"
                    [translate]="'Tracker.Add'"></button>
            </div>
        </div>
        <ng-template pTemplate="footer">
            <p-button icon="pi pi-check" (click)="displaydoc=false" label="Ok" styleClass="p-button-text">
            </p-button>
        </ng-template>
    </p-dialog>
    <!--add assets-->
    <p-dialog [(visible)]="NewDialogbool" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '60vw'}"
        [baseZIndex]="10000">

        <div class="row">
            <!-- <div class="p-field col-md-3">
            <label for="site Name2" class="labelMarginRight" [translate]="'Tracker.Site Name'"></label><br>
            <p-dropdown (onChange)="getProjectSiteIdEvent($event)" [options]="lstAllSites" name="inputlstSites2"
                [(ngModel)]="projectSiteClientObj.siteId" optionLabel="sitename" optionValue="id"
                placeholder="Site Name">
            </p-dropdown>
        </div> -->
            <div class="p-field col-md-4">
                <label for="asset Name" class="labelMarginRight" [translate]="'Tracker.Asset Name'"></label><br>
                <p-dropdown [options]="lstassets" [placeholder]="'Tracker.Asset Name' | translate"
                    [(ngModel)]="projectSiteClientObj.assetId" optionLabel="assetName" optionValue="id">
                </p-dropdown>
            </div>
            <div class="p-field col-md-4">
                <label for="Asset Serial" class="labelMarginRight" [translate]="'Tracker.Asset Serial'"></label><br>
                <input [ngModelOptions]="{standalone: true}" (blur)="onChangeSerial($event)" [(ngModel)]="projectSiteClientObj.serialNumber" type="text"
                    pInputText name="serialNumber" [placeholder]="'Tracker.Asset Serial' | translate" />
            </div>
            <!-- <div class="p-field col-md-4">
                <label for="Due Date" class="labelMarginRight">
                    {{'Tracker.DueDate' | translate}}{{'Tracker./Days' | translate}}
                </label><br>
                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="projectSiteClientObj.days" type="number"
                    name="days" pInputText min="1" [placeholder]="'Tracker.DueDate' | translate" />
            </div> -->
            <div class="p-field col-md-4">
              <label for="WstartDate">{{'Tracker.Warranty Start Date' | translate}}</label>
              <p-calendar dateFormat="dd/mm/yy" [(ngModel)]="projectSiteClientObj.warrantyStartDate" appendTo="body"
                  [placeholder]="'Tracker.Warranty Start Date' | translate" #ProWarrantyStartDate="ngModel"
                  name="WarrantyStartDate"></p-calendar>
          </div>
        </div><br>
        <div class="row">

            <div class="p-field col-md-4">
                <label for="Wperiod">{{'Tracker.Warranty Period' | translate}}{{'Tracker./Days' | translate}}</label>
                <input [(ngModel)]="projectSiteClientObj.warrantyPeriod" type="number" min="1" pInputText
                    [placeholder]="'Tracker.Warranty Period' | translate" #ProWarrantyPeriod="ngModel"
                    name="WarrantyPeriod" [ngModelOptions]="{standalone: true}" />
            </div>

            <div class="p-field col-md-4">
                <label for="Supplier Name" class="labelMarginRight" [translate]="'Tracker.Supplier Name'"></label><br>
                <p-dropdown [options]="lstSuppliers" [(ngModel)]="projectSiteClientObj.supplierId" appendTo="body"
                    [placeholder]="'Tracker.Supplier Name' | translate" optionLabel="supplierName" optionValue="id">
                </p-dropdown>
            </div>
        </div>
        <ng-template pTemplate="footer">
            <button type="submit" (click)="saveSiteAssettoList()" style="float: right;"
                class="btn btn-primary">Add</button>
            <button icon="pi pi-times" class="btn btn-primary" (click)="NewDialogbool=false">Cancel</button>
        </ng-template>

    </p-dialog>
    <p-dialog [(visible)]="EditAssetDialogbool" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '60vw'}"
    [baseZIndex]="10000">

    <div class="row">
        <div class="p-field col-md-4">
            <label for="asset Name" class="labelMarginRight" [translate]="'Tracker.Asset Name'"></label><br>
            <p-dropdown [options]="lstassets" [placeholder]="'Tracker.Asset Name' | translate"
                [(ngModel)]="ProjectSiteAssetObj.assetId" optionLabel="assetName" optionValue="id">
            </p-dropdown>
        </div>
        <div class="p-field col-md-4">
            <label for="Asset Serial" class="labelMarginRight" [translate]="'Tracker.Asset Serial'"></label><br>
            <input [ngModelOptions]="{standalone: true}" (blur)="onChangeSerialInEdit($event)" [(ngModel)]="ProjectSiteAssetObj.serialNumber" type="text"
                pInputText name="serialNumber" [placeholder]="'Tracker.Asset Serial' | translate" />
        </div>
        <!-- <div class="p-field col-md-4">
            <label for="Due Date" class="labelMarginRight">
                {{'Tracker.DueDate' | translate}}{{'Tracker./Days' | translate}}
            </label><br>
            <input [ngModelOptions]="{standalone: true}" [(ngModel)]="ProjectSiteAssetObj.days" type="number"
                name="days" pInputText min="1" [placeholder]="'Tracker.DueDate' | translate" />
        </div> -->
       
        <div class="p-field col-md-4">
            <label for="Wperiod">{{'Tracker.Warranty Period' | translate}}{{'Tracker./Days' | translate}}</label>
            <input [(ngModel)]="ProjectSiteAssetObj.warrantyPeriod" type="number" min="1" pInputText
                [placeholder]="'Tracker.Warranty Period' | translate" #ProWarrantyPeriod="ngModel"
                name="WarrantyPeriod" [ngModelOptions]="{standalone: true}" />
        </div>
    </div>
      
        <br>
    <div class="row">
        
        <div class="p-field col-md-4">
            <label for="WstartDate">{{'Tracker.Warranty Start Date' | translate}}</label>
            <!-- <p-calendar  [(ngModel)]="ProjectSiteAssetObj.warrantyStartDate" appendTo="body"
                [placeholder]="'Tracker.Warranty Start Date' | translate" #ProWarrantyStartDate="ngModel"
                name="WarrantyStartDate"></p-calendar> -->
                <mat-form-field class="example-full-width" appearance="fill">
                    <input matInput [matDatepicker]="pickerwarantrydate"
                        [value]="ProjectSiteAssetObj.warrantyStartDate | date:'yyyy-MM-dd'" [placeholder]="'Tracker.Warranty Start Date' | translate"
                        (dateChange)="addEventwarantryStartDate($event)">
                    <mat-datepicker-toggle matSuffix [for]="pickerwarantrydate"></mat-datepicker-toggle>
                    <mat-datepicker #pickerwarantrydate></mat-datepicker>
                </mat-form-field>
        </div>
        <div class="p-field col-md-4">
            <label for="Supplier Name" class="labelMarginRight" [translate]="'Tracker.Supplier Name'"></label><br>
            <p-dropdown [options]="lstSuppliers" [(ngModel)]="ProjectSiteAssetObj.supplierId" appendTo="body"
                [placeholder]="'Tracker.Supplier Name' | translate" optionLabel="supplierName" optionValue="id">
            </p-dropdown>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <button type="submit" (click)="UpdateProjectSiteAsset(ProjectSiteAssetObj.id)" style="float: right;"
            class="btn btn-primary">{{'Tracker.Update' | translate}}</button>
        <button icon="pi pi-times" class="btn btn-primary" (click)="EditAssetDialogbool=false">{{'Tracker.No' | translate}}</button>
    </ng-template>

</p-dialog>
</div>





<!-- <p-steps [model]="items" let item [(activeIndex)]="activeIndex" [readonly]="true"></p-steps>
<div *ngIf="activeIndex==0" class="stepsdemo-content"><br>
    <div class="row">
        <div class="p-field col-md-3">
            <label for="Project Name" class="labelMarginRight" [translate]="'Tracker.Project Name'">
            </label><br>
            <input minlength="3" #ProjectName="ngModel" autofocus [placeholder]="'Tracker.Project Name' | translate"
                [class.is-invalid]="ProjectName.invalid && ProjectName.touched" [class.is-valid]="ProjectName.valid"
                type="text" [(ngModel)]="projectObj.projectName" pInputText id="name" required />
            <br> <small [hidden]="ProjectName.valid || ProjectName.untouched" id="helpId" class="text-danger"
                [translate]="'Tracker.messege'"></small>
        </div>
        <div class="p-field col-md-3">
            <label for="Project Code" class="labelMarginRight" [translate]="'Tracker.Project Code'"></label><br>
            <input type="text" #ProCode="ngModel" name="ProjectCode"
                [placeholder]="'Tracker.Project Code' | translate"
                [class.is-invalid]="ProCode.invalid && ProCode.touched" [class.is-valid]="ProCode.valid" required
                minlength="3" [(ngModel)]="projectObj.projectCode" pInputText id="Code" required />
            <br> <small [hidden]="ProCode.valid || ProCode.untouched" id="helpId" class="text-danger"
                [translate]="'Tracker.messege'"></small>
        </div>
        <div class="p-field col-md-3">
            <label for="Project Type" [translate]="'Tracker.Project Type Name'"></label><br>
            <p-dropdown [options]="lstProjectTypes" [(ngModel)]="projectObj.projectTypeId"
                [placeholder]="'Tracker.Project Type Name' | translate" optionLabel="typeName" optionValue="id">
            </p-dropdown>
        </div>
        <div class="p-field col-md-3">
            <label for="Project Cost" class="labelMarginRight" [translate]="'Tracker.Project Cost'">
            </label><br>
            <input type="number" min="1" autofocus [(ngModel)]="projectObj.cost" pInputText id="Cost"
                #Procost="ngModel" name="ProjectCost" [class.is-invalid]="Procost.invalid && Procost.touched"
                [placeholder]="'Tracker.Project Cost' | translate" [class.is-valid]="Procost.valid" required
                minlength="3" />
            <br> <small [hidden]="Procost.valid || Procost.untouched" id="helpId" class="text-danger"
                [translate]="'Tracker.messegeNumber'"></small>
        </div>
    </div>
    <br>
    <div class="row">

        <div class="p-field col-md-3">
            <label for="Plannded Start Date" class="labelMarginRight"
                [translate]="'Tracker.Plannded Start Date'"></label><br>
                <mat-form-field class="example-full-width" appearance="fill" >
                    <input matInput [matDatepicker]="picker" [min]="minDate"
                        [value]="projectObj.planndedStartDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                        (dateChange)="addEventplanndedStart($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
        </div>
        <div class="p-field col-md-3">
            <label for="Actual Start Date" class="labelMarginRight"
                [translate]="'Tracker.Actual Start Date'"></label><br>
                <mat-form-field appearance="fill" >
                    <input matInput [matDatepicker]="picker2" class="form-control" [minDate]="minDate"
                        [value]="projectObj.actualStartDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                        (dateChange)="addEventActualStart($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
        </div>
        <div class="p-field col-md-3">
            <label for="Plannded End Date" class="labelMarginRight"
                [translate]="'Tracker.Plannded End Date'"></label><br>
                <mat-form-field appearance="fill" >
                    <input matInput [matDatepicker]="picker3" class="form-control" [minDate]="minplannedStartDate"
                        [value]="projectObj.planndedEndDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                        (dateChange)="addEventplanndedEnd($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
        </div>
        <div class="p-field col-md-3">
            <label for="Actual End Date" class="labelMarginRight"
                [translate]="'Tracker.Actual End Date'"></label><br>
                <mat-form-field appearance="fill" >
                    <input matInput [matDatepicker]="picker4" class="form-control" [minDate]="minActualStartDate"
                        [value]="projectObj.actualEndDate | date:'yyyy-MM-dd'" placeholder="Input & change Date"
                        (dateChange)="addEventActualEnd($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4></mat-datepicker>
                </mat-form-field>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="p-field col-md-3">
            <label for="Project Period" class="labelMarginRight" [translate]="'Tracker.Project Period'">
            </label><br>
            <input type="number" #ProPeriod="ngModel" name="ProPeriod" autofocus
                [placeholder]="'Tracker.Project Period' | translate" min="1"
                [class.is-invalid]="ProPeriod.invalid && ProPeriod.touched" [class.is-valid]="ProPeriod.valid"
                required minlength="3" [(ngModel)]="projectObj.projectPeriod" pInputText id="Period" required />
            <br> <small [hidden]="ProPeriod.valid || ProPeriod.untouched" id="helpId" class="text-danger"
                [translate]="'Tracker.messegeNumber'"></small>
        </div>
        <div class="p-field col-md-3">
            <label for="organization Name" class="labelMarginRight"
                [translate]="'Tracker.Organization Name'"></label><br>
            <p-dropdown [options]="lstOrganizations" [(ngModel)]="projectObj.organizationId"
                [placeholder]="'Tracker.Organization Name' | translate" optionLabel="organizationName"
                optionValue="id">
            </p-dropdown>
        </div>
        <div class="p-field col-md-3">
            <label for="Project Manager" class="labelMarginRight" [translate]="'Tracker.Project Manager'">
            </label><br>
            <p-dropdown [options]="lstEmployees" [(ngModel)]="projectObj.employeeId"
                [placeholder]="'Tracker.Project Manager' | translate" optionLabel="employeeName" optionValue="id">
            </p-dropdown>
        </div>
        <div class="p-field col-md-3">
            <label for="site Name" class="labelMarginRight" [translate]="'Tracker.Site Name'"></label><br>
            <p-multiSelect [options]="lstAllSites" name="inputAllSites" [style]="{'width':'100%'}" (onChange)="getSiteIdEvent($event)"
                [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedSitesColumns" optionLabel="sitename"
                selectedItemsLabel="{{selectedItemsLabel}} columns selected"
                [placeholder]="'Tracker.Site Name'| translate">
                <ng-template let-selectedSitesColumns pTemplate="selectedItems">
                    <ng-container *ngFor="let selectedLayer of selectedSitesColumns">
                        {{selectedLayer.sitename}} ,
                    </ng-container>
                </ng-template>
            </p-multiSelect>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="p-field col-md-6">
            <label for="description" [translate]="'Tracker.Description'"></label><br>
            <textarea id="description" [(ngModel)]="projectObj.description" pInputTextarea required rows="3"
                cols="63"></textarea>
        </div>
        <div class="col-md-2" style="margin-top: 7%;margin-left: 32.5%;"> <button pButton type="button"
                (click)="edit()" icon="pi pi-check" [label]="'Tracker.Submit' | translate"
                class="p-button-warning"></button>
        </div>
    </div>
</div>
<div *ngIf="activeIndex==1" class="stepsdemo-content">
    <br>
    <div class="row">
        <div class="p-field col-md-3">
            <label for="sitename" [translate]="'Tracker.Sites'"></label><br>
            <p-listbox [options]="selectedSitesColumns" [(ngModel)]="projectSiteClientObj.siteId" optionValue="id" (onChange)="getProjectSiteIdEvent($event)"
                optionLabel="sitename"></p-listbox><br>

            <label for="Client Name" [translate]="'Tracker.Client Name'"></label><br>
            <p-multiSelect (onChange)="getNotificattionEditClient($event)"
            [options]="lstClients" name="inputAllclients" [style]="{'width':'100%'}"
                [ngModelOptions]="{standalone: true}" [(ngModel)]="lstSelectedClients" optionLabel="clientName"
                selectedItemsLabel="{{selectedItemsLabel}} columns selected"
                [placeholder]="'Tracker.Client Name'| translate">
                <ng-template let-lstSelectedClients pTemplate="selectedItems">
                    <ng-container *ngFor="let selectedLayer of lstSelectedClients">
                        {{selectedLayer.clientName}} ,
                    </ng-container>
                </ng-template>
            </p-multiSelect>
            <br>
        </div>
        <div class="p-field col-md-9 card">
            <div class="row">
                <div class="p-field col-md-4">

                </div>
                <div class="p-field col-md-2"></div>
                <div class="p-field col-md-3"></div>
                <div class="p-field col-md-3">
                    <button type="submit" (click)="AddAssets()" style="float: right;margin-top: 20px;"
                        class="btn btn-primary" *ngIf="activeIndex ==1">{{'Tracker.Add Asset' | translate}}</button>
                </div>
            </div>
            <div class="row mt-3">

                <div class="col-md-12">
                    <p-table [value]="listProjectSiteAssetClients" [scrollable]="true" scrollHeight="400px"
                        scrollDirection="both">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>{{'Tracker.Asset Name' | translate}}
                                    <p-columnFilter type="text" field="assetName" display="menu"></p-columnFilter>
                                </th>
                                <th>{{'Tracker.Asset Serial' | translate}}
                                    <p-columnFilter type="text" field="serialNumber" display="menu">
                                    </p-columnFilter>
                                </th>
                                <th>{{'Tracker.DueDate' | translate}}
                                    <p-columnFilter type="text" field="days" display="menu"></p-columnFilter>
                                </th>
                                <th>{{'Tracker.Warranty Period' | translate}}
                                    <p-columnFilter type="text" field="warrantyPeriod" display="menu">
                                    </p-columnFilter>
                                </th>
                                <th>{{'Tracker.Warranty Start Date' | translate}}
                                    <p-columnFilter type="date" field="warrantyStartDate" display="menu">
                                    </p-columnFilter>
                                </th>
                                <th>{{'Tracker.Supplier Name' | translate}}
                                    <p-columnFilter type="text" field="supplierName" display="menu">
                                    </p-columnFilter>
                                </th>
                                <th>{{'Tracker.Client' | translate}}
                                    <p-columnFilter type="text" field="clientName" display="menu"></p-columnFilter>

                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-i>
                            <tr>
                                <td>{{i.assetName}}</td>
                                <td>{{i.serialNumber}}</td>
                                <td>{{i.days}} Days</td>
                                <td>{{i.warrantyPeriod}} Years</td>
                                <td>{{i.warrantyStartDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{i.supplierName}}</td>
                                <td>
                                    <div *ngFor="let cln of i.clients">
                                        <div>{{cln.clientName}}</div>
                                    </div>
                                </td>
                            </tr>
                            <tr *ngIf="listProjectSiteAssetClients.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);"
                                    [translate]="'Tracker.No data found'">.
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </div>
    </div>
    <br>
</div>
<div *ngIf="activeIndex==2" class="stepsdemo-content">
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-md-10"></div>
            <div class="col-md-2 mb-2">
                <p-button (click)="showBasicDialog()" icon="pi pi-external-link"
                    [label]="'Tracker.Add Partener' | translate">
                </p-button>
            </div>
        </div>
        <div class="row card mb-2">
            <p-table [value]="projectObj.listOfStackholders">
                <ng-template pTemplate="header">
                    <tr>
                        <th>{{'Tracker.Partener Name'| translate}}</th>
                        <th>{{'Tracker.Mobile' | translate}}</th>
                        <th>{{'Tracker.Rank' | translate}}</th>
                        <th>{{'Tracker.Delete'| translate}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-i>
                    <tr>
                        <td>{{i.stackeholderName}}</td>
                        <td>{{i.mobile}}</td>
                        <td>{{i.rank}}</td>
                        <td>
                            <span class="p-button-icon pi pi-trash" (click)="delStakeHolders(i.id)"
                                aria-hidden="true" pTooltip="Delete Partener "
                                style="margin-left: 15px;color:red"></span>
                        </td>

                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
<div *ngIf="activeIndex==3" class="stepsdemo-content">
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-md-10"></div>
            <div class="col-md-2 mb-2">
                <p-button (click)="showmileDialog()" icon="pi pi-external-link" [style]="{'padding':'0.5rem'}"
                    [label]="'Tracker.Add MileStones'| translate"></p-button>
            </div>
        </div>
        <div class="row card mb-2">
            <p-table [value]=" projectObj.listOfmilestones">
                <ng-template pTemplate="header">
                    <tr>
                        <th [translate]="'Tracker.Title'"></th>
                        <th [translate]="'Tracker.Start Date'"></th>
                        <th [translate]="'Tracker.End Date'"></th>
                        <th>{{'Tracker.Delete'| translate}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-i>
                    <tr>
                        <td>
                            {{i.title}}
                        </td>
                        <td>
                            {{i.startDate | date:'dd/MM/yyyy'}}
                        </td>
                        <td>
                            {{i.endDate | date:'dd/MM/yyyy'}}
                        </td>
                        <td>
                            <span class="p-button-icon pi pi-trash" (click)="delMile(i.id)" aria-hidden="true"
                                pTooltip="Delete mileston " style="margin-left: 15px;color:red"></span>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
<div *ngIf="activeIndex==4" class="stepsdemo-content">
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-md-10"></div>
            <div class="col-md-2  mb-2">
                <p-button [style]="{'margin-left':'1.5rem','padding':'.5rem .70rem'}" (click)="showteamDialog()"
                    icon="pi pi-external-link" [label]="'Tracker.Add Teams'|translate">
                </p-button>
            </div>
        </div>
        <div class="row card mb-2">
            <p-table [value]=" projectObj.listofprojectteam">
                <ng-template pTemplate="header">
                    <tr>
                        <th [translate]="'Tracker.Position Name'"></th>
                        <th [translate]="'Tracker.Employee Name'"></th>
                        <th [translate]="'Tracker.Department Name'"></th>
                        <th>{{'Tracker.Delete'| translate}}</th>

                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-i>
                    <tr>
                        <td>
                            {{i.projectPositionName}}
                        </td>
                        <td>
                            {{i.employeeName}}
                        </td>
                        <td>
                            {{i.departmentName}}
                        </td>
                        <td>
                            <span class="p-button-icon pi pi-trash" (click)="delteam(i.id)" aria-hidden="true"
                                pTooltip="Delete mileston " style="margin-left: 15px;color:red"></span>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
<div *ngIf="activeIndex==5" class="stepsdemo-content">
    <hr>
    <div class="container">
        <div class="row">
            <div class="col-md-10"></div>
            <div class="col-md-2  mb-2">
                <p-button (click)="showdocDialog()" icon="pi pi-external-link"
                    [label]="'Tracker.Add Document'|translate" [style]="{'margin-left':'.5rem','padding':'.4rem .40rem'}">
                </p-button>
            </div>
        </div>
        <div class="row card mb-2">
        <p-table [value]=" projectObj.listOfdocuments">
            <ng-template pTemplate="header">
                <tr>
                    <th [translate]="'Tracker.Document Name'">
                    </th>
                    <th [translate]="'Tracker.Document File'">
                    </th>
                    <th>{{'Tracker.Delete'| translate}}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-i>
                <tr>
                    <td>{{i.documentName}}</td>
                    <td (click)="downloadFile(i.documentFile)"
                        style="color: blue; cursor: pointer; text-decoration: blue  underline;">
                        {{i.documentFile}}
                    </td>
                    <td>
                        <span class="p-button-icon pi pi-trash" (click)="delDocument(i.id)" aria-hidden="true"
                            pTooltip="Delete mileston " style="margin-left: 15px;color:red"></span>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    </div>
</div>
<div>
    <button type="submit" *ngIf="isshowBtn==true && activeIndex==1" (click)="UpdateClient()" class="btn btn-success mb-1">Update Client</button><br>
    <button type="submit" (click)="PreviousStep()" class="btn btn-warning" *ngIf="activeIndex!=0">BACK</button>
    <button type="submit" (click)="NextStep()" style="float: right;" class="btn btn-success"
        *ngIf="activeIndex!=5 ">NEXT</button>
</div>
<br> -->
